name: Daily Brief Runs

on:
  schedule:
    - cron: '0 22 * * *'  # APAC at 22:00 UTC
    - cron: '0 11 * * *'  # International at 11:00 UTC
    - cron: '0 12 * * *'  # International at 12:00 UTC

jobs:
  apac-run:
    if: github.event.schedule == '0 22 * * *'
    runs-on: ubuntu-latest
    steps:
      - name: Trigger APAC Run
        run: |
          curl -X POST "${{ secrets.RUNNER_BASE_URL }}/cron" \
            -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}" \
            -H "Content-Type: application/json" \
            -d '{"runWindow":"apac","regions":["au"],"scheduled":true}'

  international-11utc:
    if: github.event.schedule == '0 11 * * *'
    runs-on: ubuntu-latest
    steps:
      - name: Trigger International Run 11UTC
        run: |
          curl -X POST "${{ secrets.RUNNER_BASE_URL }}/cron" \
            -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}" \
            -H "Content-Type: application/json" \
            -d '{"runWindow":"international","regions":["us-mx-la-lng"],"scheduled":true}'

  international-12utc:
    if: github.event.schedule == '0 12 * * *'
    runs-on: ubuntu-latest
    steps:
      - name: Trigger International Run 12UTC
        run: |
          curl -X POST "${{ secrets.RUNNER_BASE_URL }}/cron" \
            -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}" \
            -H "Content-Type: application/json" \
            -d '{"runWindow":"international","regions":["us-mx-la-lng"],"scheduled":true}'
